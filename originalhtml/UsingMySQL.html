<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>UsingMySQL</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="pythonanywhere/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="pythonanywhere/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="pythonanywhere/css/print.css">
<style type="text/css">
ul.pagetitle{
  display: inline;
  margin: 0;
  padding: 0;
  font-size: 1.5em;
}
li.pagetitle{
  display: inline;
  margin: 0;
}
td.noborder {
  border: 0;
}
</style>
</head>
<body>
<table>
<tr>
<td class="noborder">
<img src="logo.png">
</td>
<td class="noborder">
<ul class="pagetitle">
<li class="pagetitle"><a class="backlink">UsingMySQL</a>
</ul>
<br><br>
[<a href="PythonAnywhereWiki.html">PythonAnywhereWiki</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]&nbsp;
</td>
</tr>
</table>
<hr>
<div id="page">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1-5"></span><p class="line867">
<h2 id="Using_MySQL_in_PythonAnywhere">Using MySQL in PythonAnywhere</h2>
<span class="anchor" id="line-2-3"></span><span class="anchor" id="line-3-2"></span><p class="line862">To start using MySQL, you'll need to go to the MySQL tab on your <a class="https" href="https://www.pythonanywhere.com/dashboard/">dashboard</a>, and set up a password. You'll also find the connection settings (host name, username) on that tab, as well as the ability to create new databases. <span class="anchor" id="line-4-2"></span><span class="anchor" id="line-5-1"></span><p class="line874">You can start a new MySQL console to access your databases from this tab too, or alternatively you can open a MySQL shell with the following command from a bash shell or ssh session: <span class="anchor" id="line-6-1"></span><span class="anchor" id="line-7-1"></span><p class="line867"><span class="anchor" id="line-8-1"></span><span class="anchor" id="line-9-1"></span><pre><span class="anchor" id="line-1"></span>mysql -u USERNAME -h HOSTNAME -p</pre><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line862">The USERNAME is the username you use to log in to <a href="./PythonAnywhere.html">PythonAnywhere</a> and the HOSTNAME is on your Databases tab. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line862">To access a MySQL database from Python 2.6 or 2.7, just <tt>import&nbsp;MySQLdb</tt>. <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line867">
<h3 id="MySQL_with_Django">MySQL with Django</h3>
<span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line862">To configure Django to access a MySQL database on <a href="./PythonAnywhere.html">PythonAnywhere</a>, you need to do this in your settings file: <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line867"><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><pre><span class="anchor" id="line-1-1"></span>DATABASES = {
<span class="anchor" id="line-2"></span>    'default': {
<span class="anchor" id="line-3"></span>        'ENGINE': 'django.db.backends.mysql',
<span class="anchor" id="line-4"></span>        'NAME': '&lt;your_username&gt;$&lt;your_database_name&gt;',
<span class="anchor" id="line-5"></span>        'USER': '&lt;your_username&gt;',
<span class="anchor" id="line-6"></span>        'PASSWORD': '&lt;your_mysql_password&gt;',
<span class="anchor" id="line-7"></span>        'HOST': '&lt;your_mysql_hostname&gt;',
<span class="anchor" id="line-8"></span>    }
<span class="anchor" id="line-9"></span>}</pre><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><p class="line874">Again, you can get the username and hostname details from the "Databases" tab. <span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><p class="line867">
<h3 id="MySQL_with_Django_tests">MySQL with Django tests</h3>
<span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line862">When you run Django tests that use the database, Django tries to create a database called test_&lt;original database name&gt; and that will fail because Django does not have permissions to create a new database. To run Django tests on <a href="./PythonAnywhere.html">PythonAnywhere</a>, add a <tt class="backtick">TEST_NAME</tt> key to your database definition in settings.py. Like this: <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><p class="line867"><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><pre><span class="anchor" id="line-1-2"></span>DATABASES = {
<span class="anchor" id="line-2-1"></span>    'default': {
<span class="anchor" id="line-3-1"></span>        'TEST_NAME': '&lt;your username&gt;$test_&lt;your database name&gt;',
<span class="anchor" id="line-4-1"></span>         ...</pre><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line862">We suggest you use a form like <tt class="backtick">&lt;your&nbsp;username&gt;$test_&lt;your&nbsp;database&nbsp;name&gt;</tt>. Create this database from the <a href="./PythonAnywhere.html">PythonAnywhere</a> Databases tab and Django will happily use it and run your tests. <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><p class="line867">
<h3 id="MySQL_with_Python_3">MySQL with Python 3</h3>
<span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><p class="line874">If you're using MySQL with Python 3, you need to install a module.  If you're not using a virtualenv, run: <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><p class="line867"><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><pre><span class="anchor" id="line-1-3"></span>$ pip3.4 install --user mysqlclient</pre><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line874">If using a virtualenv: <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line867"><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><pre><span class="anchor" id="line-1-4"></span>$ workon my-virtualenv
<span class="anchor" id="line-2-2"></span>(my-virtualenv)$ pip install mysqlclient</pre><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><p class="line874">...once that's completed, then the same imports/Django settings/etc as for Python 2.x will work. <span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><p class="line867">
<h3 id="Handling_connection_timeout_errors">Handling connection timeout errors</h3>
<span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><p class="line862">If you're seeing unexpected 'disconnected' errors, it may be due to our connection timeouts.  We set a 5-minute timeout on database connections, so you'll want to handle unexpected disconnects, either manually with some sort of try/except, or, if you're using an ORM, by setting a timeout on the longevity of workers in your connection pool.  SQLAlchemy has a pool_recycle argument, for example:  <a class="http" href="http://docs.sqlalchemy.org/en/rel_0_9/core/pooling.html#setting-pool-recycle">http://docs.sqlalchemy.org/en/rel_0_9/core/pooling.html#setting-pool-recycle</a> <span class="anchor" id="line-68"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2015-09-17 14:07
</body>
</html>
