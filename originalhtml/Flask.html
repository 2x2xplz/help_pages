<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Flask</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="pythonanywhere/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="pythonanywhere/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="pythonanywhere/css/print.css">
<style type="text/css">
ul.pagetitle{
  display: inline;
  margin: 0;
  padding: 0;
  font-size: 1.5em;
}
li.pagetitle{
  display: inline;
  margin: 0;
}
td.noborder {
  border: 0;
}
</style>
</head>
<body>
<table>
<tr>
<td class="noborder">
<img src="logo.png">
</td>
<td class="noborder">
<ul class="pagetitle">
<li class="pagetitle"><a class="backlink">Flask</a>
</ul>
<br><br>
[<a href="PythonAnywhereWiki.html">PythonAnywhereWiki</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]&nbsp;
</td>
</tr>
</table>
<hr>
<div id="page">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1-4"></span><p class="line867">
<h1 id="Setting_up_Flask_applications_on_PythonAnywhere">Setting up Flask applications on PythonAnywhere</h1>
<span class="anchor" id="line-2-3"></span><span class="anchor" id="line-3-1"></span><p class="line862">There are two main ways to set up a Flask application on <a href="./PythonAnywhere.html">PythonAnywhere</a>: <span class="anchor" id="line-4-1"></span><span class="anchor" id="line-5-1"></span><ol type="1"><li>Starting from scratch using our default versions of Flask <span class="anchor" id="line-6"></span></li><li>Importing a pre-existing app using Manual configuration, and using a virtualenv <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span></li></ol><p class="line862">The first option works well if you're just playing around and want to throw something together from scratch.  Go to the <a class="nonexistent" href="./Flask(2f)web_app_setup(2f).html">Web Tab</a> and hit <strong>Add a new Web App</strong>, and choose Flask and the Python version you want. <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><p class="line874">The second option is described in more detail below <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><p class="line867">
<h2 id="Getting_your_code_onto_PythonAnywhere">Getting your code onto PythonAnywhere</h2>
<span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line862">This guide assumes you've already managed to get your code onto <a href="./PythonAnywhere.html">PythonAnywhere</a>.  Check out the <a href="./FTP.html">getting code in and out</a> guide if you need to. <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line862">For the purposes of these examples, we'll assume your code lives at <tt class="backtick">/home/yourusername/mysite</tt> <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
<h2 id="Setting_up_your_virtualenv">Setting up your virtualenv</h2>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line862">Open up a <a class="nonexistent" href="./Flask(2f)consoles(2f).html">/consoles/</a>(Bash Console) and run <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><p class="line867"><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><pre><span class="anchor" id="line-1"></span>mkvirtualenv --python=/usr/bin/python3.4 my-virtualenv  # use whichever python version you prefer
<span class="anchor" id="line-2"></span>pip install flask</pre><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line862">You'll see the prompt changes from a <tt class="backtick">$</tt> to saying <tt class="backtick">(my-virtualenv)$</tt> -- that's how you can tell your virtualenv is active. Whenever you want to work on your project in the console, you need to make sure the virtualenv is active.  You can reactivate it at a later date with <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line867"><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><pre><span class="anchor" id="line-1-1"></span>$ workon my-virtualenv
<span class="anchor" id="line-2-1"></span>(my-virtualenv)$ </pre><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line862">You can also install any other dependencies you may have at this point, like Sqlalchemy, using <tt class="backtick">pip&nbsp;install&nbsp;flask-sqlalchemy</tt>, or <tt class="backtick">pip&nbsp;install&nbsp;-r&nbsp;requirements.txt</tt>, if you have a requirements.txt <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line867">
<h2 id="Setting_up_the_Web_app_using_Manual_configuration">Setting up the Web app using Manual configuration</h2>
<span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line862">Go to the <a class="nonexistent" href="./Flask(2f)web_app_setup(2f).html">Web Tab</a> and hit <strong>Add a new web app</strong>.  Choose <strong>Manual Configuration</strong>, and then choose the <strong>Python version</strong> -- make sure it's the same version as the one you used in your virtualenv <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><p class="line862">Now go to the <strong>Virtualenv</strong> section, and enter your virtualenv name:  <em>my-virtualenv</em>.  When you hit enter, you'll see it updates to the full path to your virtuaelenv (<em>/home/yourusername/.virtualenvs/my-virtualenv</em>). <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line874">Finally, go edit the wsgi configuration file.  You'll find a link to it near the top of the Web tab. <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line867">
<h2 id="Configuring_the_WSGI_file">Configuring the WSGI file</h2>
<span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line874">To configure this file, you need to know which file your flask app lives in.  The flask app usually looks something like this: <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line867"><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-1-5"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-1c5f98a324798fad2137f8d9bd00eb2870cb1365\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-1c5f98a324798fad2137f8d9bd00eb2870cb1365" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-1c5f98a324798fad2137f8d9bd00eb2870cb1365_1">   1</a> </span><span class="LineAnchor" id="CA-1c5f98a324798fad2137f8d9bd00eb2870cb1365_1"></span><span class="anchor" id="line-1-6"></span><span class="ID">app</span> = <span class="ID">Flask</span>(<span class="ID">__name__</span>)</span>
</pre></div></div><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><p class="line862">Make a note of the path to that file, and the name of the app variable (is it "app"?  Or "application"?) -- in this example, let's say it's <tt class="backtick">/home/yourusername/mysite/flask_app.py</tt>, and the variable is "app". <span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><p class="line874">In your WSGI file, skip down to the flask section, uncomment it, and make it looks something like this: <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><p class="line867"><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-1-7"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-732fe9baa6ce1b4b25f571883e00e63121570727\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-732fe9baa6ce1b4b25f571883e00e63121570727" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-732fe9baa6ce1b4b25f571883e00e63121570727_1">   1</a> </span><span class="LineAnchor" id="CA-732fe9baa6ce1b4b25f571883e00e63121570727_1"></span><span class="anchor" id="line-1-8"></span><span class="ID">path</span> = <span class="String">'</span><span class="String">/home/yourusername/mysite</span><span class="String">'</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-732fe9baa6ce1b4b25f571883e00e63121570727_2">   2</a> </span><span class="LineAnchor" id="CA-732fe9baa6ce1b4b25f571883e00e63121570727_2"></span><span class="anchor" id="line-2-4"></span><span class="ResWord">if</span> <span class="ID">path</span> <span class="ResWord">not</span> <span class="ResWord">in</span> <span class="ID">sys</span>.<span class="ID">path</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-732fe9baa6ce1b4b25f571883e00e63121570727_3">   3</a> </span><span class="LineAnchor" id="CA-732fe9baa6ce1b4b25f571883e00e63121570727_3"></span><span class="anchor" id="line-3-2"></span>    <span class="ID">sys</span>.<span class="ID">path</span>.<span class="ID">append</span>(<span class="ID">path</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-732fe9baa6ce1b4b25f571883e00e63121570727_4">   4</a> </span><span class="LineAnchor" id="CA-732fe9baa6ce1b4b25f571883e00e63121570727_4"></span><span class="anchor" id="line-4-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-732fe9baa6ce1b4b25f571883e00e63121570727_5">   5</a> </span><span class="LineAnchor" id="CA-732fe9baa6ce1b4b25f571883e00e63121570727_5"></span><span class="anchor" id="line-5-2"></span><span class="ResWord">from</span> <span class="ID">flask_app</span> <span class="ResWord">import</span> <span class="ID">app</span> <span class="ResWord">as</span> <span class="ID">application</span></span>
</pre></div></div><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><p class="line867">
<h2 id="Do_not_use_app.run.28.29">Do not use app.run()</h2>
<span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><p class="line874">When you're using Flask on your own PC, you'll often "run" flask using a line that looks something like this: <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><p class="line867"><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><pre><span class="anchor" id="line-1-2"></span>app.run(host='127.0.0.1',port=8000,debug=True)</pre><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><p class="line862">That won't work on <a href="./PythonAnywhere.html">PythonAnywhere</a> -- the only way your app will appear on the public internet is if it's configured via the web tab, with a wsgi file. <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><p class="line862">More importantly, <strong>'if app.run() gets called when we import your code, it will crash your app</strong>', and you'll see a 504 error on your site, as detailed in <a href="./Flask504Error.html">Flask504Error</a> <span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><p class="line862">Thankfully, most Flask tutorials out there suggest you put the <tt class="backtick">app.run()</tt> inside an <tt class="backtick">if&nbsp;__name__&nbsp;=&nbsp;'__main__':</tt> clause, which will be OK, because that won't get run when we import it. <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><p class="line867"><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-1-9"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_1">   1</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_1"></span><span class="anchor" id="line-1-10"></span><span class="Comment"># this is ok</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_2">   2</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_2"></span><span class="anchor" id="line-2-5"></span><span class="ID">app</span> = <span class="ID">Flask</span>(<span class="ID">__name__</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_3">   3</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_3"></span><span class="anchor" id="line-3-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_4">   4</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_4"></span><span class="anchor" id="line-4-3"></span><span class="ID">@app.route</span>(<span class="String">'</span><span class="String">/</span><span class="String">'</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_5">   5</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_5"></span><span class="anchor" id="line-5-3"></span><span class="ResWord">def</span> <span class="ID">home</span>():</span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_6">   6</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_6"></span><span class="anchor" id="line-6-1"></span>   <span class="Comment"># etc etc, flask app code</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_7">   7</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_7"></span><span class="anchor" id="line-7-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_8">   8</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_8"></span><span class="anchor" id="line-8-1"></span><span class="ResWord">if</span> <span class="ID">__name__</span> = <span class="String">'</span><span class="String">__main__</span><span class="String">'</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_9">   9</a> </span><span class="LineAnchor" id="CA-ba42f3823717f1104dc4f89f01b4af6fcc4b1ba6_9"></span><span class="anchor" id="line-9-1"></span>    <span class="ID">app</span>.<span class="ID">run</span>()</span>
</pre></div></div><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><p class="line867"><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-1-11"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-3c0a10db52abab77a7b29d991def9370dc029b73\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-3c0a10db52abab77a7b29d991def9370dc029b73_1">   1</a> </span><span class="LineAnchor" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73_1"></span><span class="anchor" id="line-1-12"></span><span class="Comment"># this is not ok</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-3c0a10db52abab77a7b29d991def9370dc029b73_2">   2</a> </span><span class="LineAnchor" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73_2"></span><span class="anchor" id="line-2-6"></span><span class="ID">app</span> = <span class="ID">Flask</span>(<span class="ID">__name___</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-3c0a10db52abab77a7b29d991def9370dc029b73_3">   3</a> </span><span class="LineAnchor" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73_3"></span><span class="anchor" id="line-3-4"></span><span class="ID">@app.route</span>(<span class="String">'</span><span class="String">/</span><span class="String">'</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-3c0a10db52abab77a7b29d991def9370dc029b73_4">   4</a> </span><span class="LineAnchor" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73_4"></span><span class="anchor" id="line-4-4"></span><span class="ResWord">def</span> <span class="ID">home</span>():</span>
<span class="line"><span class="LineNumber"><a href="#CA-3c0a10db52abab77a7b29d991def9370dc029b73_5">   5</a> </span><span class="LineAnchor" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73_5"></span><span class="anchor" id="line-5-4"></span>   <span class="Comment"># etc etc, flask app code</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-3c0a10db52abab77a7b29d991def9370dc029b73_6">   6</a> </span><span class="LineAnchor" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73_6"></span><span class="anchor" id="line-6-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-3c0a10db52abab77a7b29d991def9370dc029b73_7">   7</a> </span><span class="LineAnchor" id="CA-3c0a10db52abab77a7b29d991def9370dc029b73_7"></span><span class="anchor" id="line-7-2"></span><span class="ID">app</span>.<span class="ID">run</span>()</span>
</pre></div></div><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><p class="line867">
<h2 id="What_about_my_database_config.3F">What about my database config?</h2>
<span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><p class="line862">Many guides on the Internet also suggest you put your database setup inside the <tt class="backtick">__main__</tt> clause, like this: <span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><p class="line867"><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-1-13"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c_1">   1</a> </span><span class="LineAnchor" id="CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c_1"></span><span class="anchor" id="line-1-14"></span><span class="ResWord">if</span> <span class="ID">__name__</span> == <span class="String">'</span><span class="String">__main__</span><span class="String">'</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c_2">   2</a> </span><span class="LineAnchor" id="CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c_2"></span><span class="anchor" id="line-2-7"></span>    <span class="ID">db</span>.<span class="ID">create_all</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c_3">   3</a> </span><span class="LineAnchor" id="CA-6fdf46361d576e1a3130574ddcf174c8b2712c8c_3"></span><span class="anchor" id="line-3-5"></span>    <span class="ID">app</span>.<span class="ID">run</span>()</span>
</pre></div></div><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><p class="line862">That will work fine on your machine, but, again, we don't want to use app.run() on <a class="nonexistent" href="./PythonAnywere.html">PythonAnywere</a>. But you'll still want to be able to run <tt class="backtick">db.create_all()</tt> every so often on <a href="./PythonAnywhere.html">PythonAnywhere</a>, to update your database tables or whatever it may be. <span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><p class="line874">Two solutions -- either just run it from a Bash console (remembering to activate your virtualenv first) and then Ctrl+C the flask server when it runs <span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><p class="line867"><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><pre><span class="anchor" id="line-1-3"></span>$ workon my-virtualenv
<span class="anchor" id="line-2-2"></span>(my-virtualenv)$ python flask_app.py
<span class="anchor" id="line-3"></span> * Running on http://127.0.0.1:5000/
<span class="anchor" id="line-4"></span>^C
<span class="anchor" id="line-5"></span>(my-virtualenv)$</pre><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><p class="line862">Or make a clever little if in your <span class="u">main</span> that checks if it's running on <a href="./PythonAnywhere.html">PythonAnywhere</a>, eg: <span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><p class="line867"><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-1-15"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-6e5e69c3998e47b97092d0843747d9fb342c9b72\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_1">   1</a> </span><span class="LineAnchor" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_1"></span><span class="anchor" id="line-1-16"></span><span class="ResWord">from</span> <span class="ID">socket</span> <span class="ResWord">import</span> <span class="ID">gethostname</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_2">   2</a> </span><span class="LineAnchor" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_2"></span><span class="anchor" id="line-2-8"></span>[...]</span>
<span class="line"><span class="LineNumber"><a href="#CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_3">   3</a> </span><span class="LineAnchor" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_3"></span><span class="anchor" id="line-3-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_4">   4</a> </span><span class="LineAnchor" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_4"></span><span class="anchor" id="line-4-5"></span><span class="ResWord">if</span> <span class="ID">__name__</span> == <span class="String">'</span><span class="String">__main__</span><span class="String">'</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_5">   5</a> </span><span class="LineAnchor" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_5"></span><span class="anchor" id="line-5-5"></span>    <span class="ID">db</span>.<span class="ID">create_all</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_6">   6</a> </span><span class="LineAnchor" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_6"></span><span class="anchor" id="line-6-3"></span>    <span class="ResWord">if</span> <span class="String">'</span><span class="String">liveconsole</span><span class="String">'</span> <span class="ResWord">not</span> <span class="ResWord">in</span> <span class="ID">gethostname</span>():</span>
<span class="line"><span class="LineNumber"><a href="#CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_7">   7</a> </span><span class="LineAnchor" id="CA-6e5e69c3998e47b97092d0843747d9fb342c9b72_7"></span><span class="anchor" id="line-7-3"></span>        <span class="ID">app</span>.<span class="ID">run</span>()</span>
</pre></div></div><span class="anchor" id="line-136"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2015-08-21 13:55
</body>
</html>
