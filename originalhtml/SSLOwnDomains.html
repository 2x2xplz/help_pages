<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>SSLOwnDomains</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="pythonanywhere/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="pythonanywhere/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="pythonanywhere/css/print.css">
<style type="text/css">
ul.pagetitle{
  display: inline;
  margin: 0;
  padding: 0;
  font-size: 1.5em;
}
li.pagetitle{
  display: inline;
  margin: 0;
}
td.noborder {
  border: 0;
}
</style>
</head>
<body>
<table>
<tr>
<td class="noborder">
<img src="logo.png">
</td>
<td class="noborder">
<ul class="pagetitle">
<li class="pagetitle"><a class="backlink">SSLOwnDomains</a>
</ul>
<br><br>
[<a href="PythonAnywhereWiki.html">PythonAnywhereWiki</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]&nbsp;
</td>
</tr>
</table>
<hr>
<div id="page">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="Using_SSL_on_your_own_domain">Using SSL on your own domain</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
<h2 id="in_brief">in brief</h2>
<span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line874">We need you to point us to the location of two files, saved into your files area somewhere: <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><ul><li><p class="line862">The <strong>Private Key</strong>, which should be <strong>unencrypted</strong>, ie it should start with <tt class="backtick">----BEGIN&nbsp;RSA&nbsp;PRIVATE&nbsp;KEY</tt> <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></li><li class="gap"><p class="line862">The <strong>Combined Certificate</strong>, which consists of your certificate <em>and</em> the certificate chain sent to you by your vendor.  It should have several BEGIN/END CERTICATE blocks. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></li></ul><p class="line867">
<h2 id="Detailed_instructions">Detailed instructions</h2>
<span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line862">To enable SSL/HTTPS for your custom domain (that is, not <tt class="backtick">yourusername.pythonanywhere.com</tt>, which gets it automatically), you'll need to get an SSL certificate.  We don't sell them ourselves, so the first thing is to identify someone who will provide you with a certificate -- an SSL certificate vendor.  <a class="http" href="http://www.startssl.com/?app=1">StartSSL</a> provide free ones, but have a rather user-hostile site.  Other companies charge for the certificates, but are easier to use.  You may find that your domain name registrar provides them (<a class="nonexistent" href="./GoDaddy.html">GoDaddy</a> and Namecheap certainly do), so if you've found their customer service to be good, you might want to use them. <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line862">To get the certificate, you'll need to send them a text file called a "Certificate Signing Request" (CSR), which is basically an encoded representation of a request to a certificate-issuing organisation (a "Certification Authority", or CA -- your certificate vendor may be a CA themselves, or they may resell certificates from a CA) saying "please give me a SSL certificate for the following domain, signed by yourselves, that can only be unlocked using my private key."   And in order to generate one of those, you'll need to generate a private cryptographic key.  Here are detailed instructions on how to do that on <a href="./PythonAnywhere.html">PythonAnywhere</a>. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><ul><li><p class="line862">From a Bash console on <a href="./PythonAnywhere.html">PythonAnywhere</a>, generate the private key and CSR using the openssl command, like this (all on one line, replacing yourdomain.com appropriately): <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><ul><li style="list-style-type:none">openssl req -new -newkey rsa:2048 -nodes -keyout yourdomain.com.key -out yourdomain.com.csr <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></li></ul></li><li class="gap">When the command asks you questions, you need to answer like this: <span class="anchor" id="line-22"></span><ul><li>Common name: your site's hostname, eg. www.yourdomain.com  The www. is important; a certificate for yourdomain.com won't work on www.yourdomain.com, and vice versa, so make sure you enter the one you use for your website. <span class="anchor" id="line-23"></span></li><li>Organisation: your business or other organisation name. <span class="anchor" id="line-24"></span></li><li>Organisation unit: your department -- just your organisation name again if you prefer. <span class="anchor" id="line-25"></span></li><li>City or locality: your city <span class="anchor" id="line-26"></span></li><li>State or province: as you'd expect.  Leave blank if not applicable <span class="anchor" id="line-27"></span></li><li><p class="line862">Country: your two-letter ISO country code as per <a class="http" href="http://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements">this Wikipedia page</a> <span class="anchor" id="line-28"></span></li><li>When it asks you for a passphrase, leave it blank. <span class="anchor" id="line-29"></span></li></ul></li><li>Next, you need to provide the contents of the CSR (yourdomain.com.csr -- not the key!) to your certificate vendor.  They will generate the certificate for you, or will get the CA to do so on their behalf, and send it back to you. <span class="anchor" id="line-30"></span></li><li><p class="line862">The certificate (which you should save on <a href="./PythonAnywhere.html">PythonAnywhere</a> as yourdomain.com.cert) will be a text file starting with something like "BEGIN CERTIFICATE" (with some dashes on either side), then some encoded stuff, then "END CERTIFICATE" (again, with dashes).  It's an encoded proof that the CA have certified that the person who owns the private key (the yourdomain.com.key file, which they haven't seen, but which was used to sign the CSR they did receive) definitely is you. <span class="anchor" id="line-31"></span></li><li>Because not all browsers necessarily trust your particular CA to certify people, you also often need a "certificate chain" AKA a "certificate bundle", which connects your certificate with someone who is trusted by all browsers.  This is yet another text file, with several certificates in it.  The certificate vendor should send it to you alongside your own certificate.  You can tell the difference between the two because your certificate will just have one "BEGIN/END" bit in it, while the chain will probably have several.  (Some CAs are able to offer certificates that are trusted directly.  They tend to be the most expensive ones.  Check with your certificate vendor if you're unsure.) <span class="anchor" id="line-32"></span></li><li>Once you have the certificate and the chain, create a new file which has your certificate at the top, then the chain afterwards.  (You may have to add a newline so that you don't get the END line of your certificate on the same line as the BEGIN for the first line of the chain.)  Save that as yourdomain.com.combined.cert <span class="anchor" id="line-33"></span></li><li><p class="line862">Get your private key: This is the private key that you would have created as part of the process of generating the CSR. You will need to give it to use unencrypted, so make sure that the key starts with the line <tt class="backtick">-----BEGIN&nbsp;RSA&nbsp;PRIVATE&nbsp;KEY-----</tt>. if you see something like <tt class="backtick">Proc-Type:&nbsp;4,ENCRYPTED</tt> then it's encrypted and you need to decrypt it before we can use it: <tt class="backtick">openssl&nbsp;rsa&nbsp;-in&nbsp;server.key.encrypted&nbsp;-out&nbsp;server.key</tt> <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span></li></ul><p class="line862">Finally tell us in a "Send feedback" message (link at the top right of this page) where in your file storage on <a href="./PythonAnywhere.html">PythonAnywhere</a> we can find the yourdomain.com.key and the yourdomain.com.combined.cert files, and which website it's for.  We can take it from there. <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line867">
<h2 id="Forcing_HTTPS">Forcing HTTPS</h2>
<span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><p class="line862">For some sites, you might not only want to offer an HTTPS connection to your users -- you might want to force all access to your site to go through HTTPS.  <a href="./ForcingHTTPS.html">Here are some hints on how to do that for different web frameworks</a>. <span class="anchor" id="line-41"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2015-09-17 14:07
</body>
</html>
